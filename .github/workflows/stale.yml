name: Stale and Delete Branches

on:
  schedule:
    # cron runs at 12 am daily
    - cron: "0 0 * * *"
  push:
    branches: [ "main" ]

jobs:
  stale_branches:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write
      # delete branch permission.
      contents: write
    steps:
    - name: Stale Branches
      uses: crs-k/stale-branches@v2.0.1
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}'
        days-before-stale: 1
        days-before-delete: 2
        max-issues: 20
        tag-committer: true
        stale-branch-label: 'stale branch 🗑️'
        compare-branches: 'info'     
        
        